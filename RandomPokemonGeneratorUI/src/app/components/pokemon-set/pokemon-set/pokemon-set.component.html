<form [formGroup]="updatePokemonSetForm" (ngSubmit)="updatePokemonSet()">
    <div class="toolbar">
        <div class="header-title">
            <h1>Viewing Pokemon Set: </h1>
            <h2>{{pokemonSetName}}</h2>
        </div>
        <mat-form-field>
            <input matInput type="text" formControlName="setNameControl" [errorStateMatcher]="matcher"
                placeholder="Edit Set Name">
            <mat-error *ngIf="updatePokemonSetForm.get('setNameControl').hasError('required')">
                Set Name is <strong>required</strong>
            </mat-error>
        </mat-form-field>
        <button mat-raised-button color="primary" class="mat-button" [disabled]="updatePokemonSetForm.invalid">
            Save Pokemon Set
        </button>
    </div>
    <div class="edit-pokemon">
        <div class="pokemon-set">
            <div class="pokemon-details">
                <div class="pokemon">
                    <div>Nickname: </div>
                    <input matInput type="text" formControlName="nameControl" [errorStateMatcher]="matcher">
                    <img src="https://play.pokemonshowdown.com/sprites/dex/{{pokemonSpecies?.replace(' ', '').replace('’', '').replace('\'', '').replace('-paldea-', '-paldea').replace('ting-lu', 'tinglu').replace('chien-pao', 'chienpao').replace('wo-chien', 'wochien').replace('chi-yu', 'chiyu')}}.png"
                        name="{{pokemonSpecies?.replace(' ', '').replace('’', '').replace('\'', '').replace('-paldea-', '-paldea').replace('ting-lu', 'tinglu').replace('chien-pao', 'chienpao').replace('wo-chien', 'wochien').replace('chi-yu', 'chiyu')}}"
                        onerror="this.src = (this.src == `https://play.pokemonshowdown.com/sprites/gen5/` + this.name + `.png`) ? `../../../../assets/MissingNo.png` : `https://play.pokemonshowdown.com/sprites/gen5/` + this.name + `.png`;"
                        class="image" />
                </div>
                <div class="details-container">
                    <strong>Details</strong>
                    <div class="details-content">
                        <div>Level: </div><input matInput type="number" formControlName="levelControl"
                            [errorStateMatcher]="matcher">
                        <div></div>
                        <div>Gender: </div><input matInput type="text" formControlName="genderControl"
                            [errorStateMatcher]="matcher">
                        <div></div>
                        <div>Shiny: </div>
                        <div>
                            <input type="radio" id="shiny-selected" name="shiny-radio" value="Yes">
                            <label for="shiny-selected">Yes</label>
                            <input type="radio" id="not-shiny-selected" name="shiny-radio" value="No">
                            <label for="not-shiny-selected">No</label>
                        </div>
                        <div></div>
                        <div>Tera Type: </div>
                        <select type="text" formControlName="terastallizeTypeControl" class="tera-type">
                            <option value="Bug">Bug</option>
                            <option value="Dark">Dark</option>
                            <option value="Dragon">Dragon</option>
                            <option value="Electric">Electric</option>
                            <option value="Fairy">Fairy</option>
                            <option value="Fighting">Fighting</option>
                            <option value="Fire">Fire</option>
                            <option value="Flying">Flying</option>
                            <option value="Ghost">Ghost</option>
                            <option value="Grass">Grass</option>
                            <option value="Ground">Ground</option>
                            <option value="Ice">Ice</option>
                            <option value="Normal">Normal</option>
                            <option value="Poison">Poison</option>
                            <option value="Psychic">Psychic</option>
                            <option value="Rock">Rock</option>
                            <option value="Steel">Steel</option>
                            <option value="Water">Water</option>
                        </select>
                        <div></div>
                    </div>
                </div>
                <div class="moves">
                    <div>Moves: </div>
                    <input matInput type="text" class="move-input" formControlName="moveOneControl"
                        [errorStateMatcher]="matcher">
                    <input matInput type="text" class="move-input" formControlName="moveTwoControl"
                        [errorStateMatcher]="matcher">
                    <input matInput type="text" class="move-input" formControlName="moveThreeControl"
                        [errorStateMatcher]="matcher">
                </div>
                <div>
                    <div class="species-error">
                        Pokemon:
                        <mat-error *ngIf="updatePokemonSetForm.get('speciesControl').hasError('required')">
                            <strong>Required!</strong>
                        </mat-error>
                    </div>
                    <input matInput type="text" formControlName="speciesControl" [errorStateMatcher]="matcher"
                        (keyup)="renderImageOnSpeciesInputChange($event)">
                </div>
                <div>
                    <div>Item: </div><input matInput type="text" formControlName="itemControl"
                        [errorStateMatcher]="matcher">
                </div>
                <div>
                    <div class="ability-error">
                        Ability:
                        <mat-error *ngIf="updatePokemonSetForm.get('abilityControl').hasError('required')">
                            <strong>Required!</strong>
                        </mat-error>
                    </div>
                    <input matInput type="text" formControlName="abilityControl" [errorStateMatcher]="matcher">
                </div>
                <div class="last-move">
                    <div class="empty"></div><input matInput type="text" class="move-input"
                        formControlName="moveFourControl" [errorStateMatcher]="matcher">
                </div>
            </div>
            <div class="pokemon-stats">
                <div></div>
                <strong>EVs</strong>
                <div></div>
                <strong>IVs</strong>
                <strong>HP</strong>
                <div><input matInput type="number" formControlName="HpEffortValueControl" [errorStateMatcher]="matcher">
                </div>
                <div><input type="range" formControlName="HpEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="HpIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>Atk</strong>
                <div><input matInput type="number" formControlName="AtkEffortValueControl"
                        [errorStateMatcher]="matcher"></div>
                <div><input type="range" formControlName="AtkEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="AtkIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>Def</strong>
                <div><input matInput type="number" formControlName="DefEffortValueControl"
                        [errorStateMatcher]="matcher"></div>
                <div><input type="range" formControlName="DefEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="DefIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>SpA</strong>
                <div><input matInput type="number" formControlName="SpaEffortValueControl"
                        [errorStateMatcher]="matcher"></div>
                <div><input type="range" formControlName="SpaEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="SpaIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>SpD</strong>
                <div><input matInput type="number" formControlName="SpdEffortValueControl"
                        [errorStateMatcher]="matcher"></div>
                <div><input type="range" formControlName="SpdEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="SpdIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>Spe</strong>
                <div><input matInput type="number" formControlName="SpeEffortValueControl"
                        [errorStateMatcher]="matcher"></div>
                <div><input type="range" formControlName="SpeEffortValueControl" class="ev-slider" min="0" max="252"
                        step="4"></div>
                <div><input matInput type="number" formControlName="SpeIndividualValueControl"
                        [errorStateMatcher]="matcher"></div>
                <strong>Remaining:</strong>
                <div>{{evTotal}}</div>
                <div class="nature">
                    <div class="nature-content">
                        <strong>Nature:</strong>
                        <select type="text" formControlName="natureControl" class="nature-dropdown">
                            <option value="Adamant">Adamant (+Atk, -SpA)</option>
                            <option value="Bashful">Bashful</option>
                            <option value="Bold">Bold (+Def, -Atk)</option>
                            <option value="Brave">Brave (+Atk, -Spe)</option>
                            <option value="Calm">Calm (+SpD, -Atk)</option>
                            <option value="Careful">Careful (+SpD, -SpA)</option>
                            <option value="Docile">Docile</option>
                            <option value="Gentle">Gentle (+SpD, -Def)</option>
                            <option value="Hardy">Hardy</option>
                            <option value="Hasty">Hasty (+Spe, -Def)</option>
                            <option value="Impish">Impish (+Def, -SpA)</option>
                            <option value="Jolly">Jolly (+Spe, -SpA)</option>
                            <option value="Lax">Lax (+Def, -SpD)</option>
                            <option value="Lonely">Lonely (+Atk, -Def)</option>
                            <option value="Mild">Mild (+SpA, -Def)</option>
                            <option value="Modest">Modest (+SpA, -Atk)</option>
                            <option value="Naive">Naive (+Spe, -SpD)</option>
                            <option value="Naughty">Naughty (+Atk, -SpD)</option>
                            <option value="Quiet">Quiet (+SpA, -Spe)</option>
                            <option value="Quirky">Quirky</option>
                            <option value="Rash">Rash (+SpA, -SpD)</option>
                            <option value="Relaxed">Relaxed (+Def, -Spe)</option>
                            <option value="Sassy">Sassy (+SpD, -Spe)</option>
                            <option value="Serious">Serious</option>
                            <option value="Timid">Timid (+Spe, -Atk)</option>
                        </select>
                        <mat-error *ngIf="updatePokemonSetForm.get('natureControl').hasError('required')">
                            <strong>Required!</strong>
                        </mat-error>
                    </div>
                </div>
            </div>
        </div>
        <form class="pokemon-export-container" [formGroup]="importPokemonSetForm" id="importForm">
            <div class="pokemon-export-content">
                <div class="pokemon-export-textbox-container"><textarea type="textarea" rows="5"
                        class="pokemon-export-textbox" formControlName="importPokemonSetControl" form="importForm"
                        placeholder="Import a Pokemon set here...."></textarea>
                </div>
                <div class="pokemon-export-toolbar">
                    <strong class="export-title">Export Pokemon Set: </strong>
                    <button mat-raised-button color="accent" class="mat-button"
                        [disabled]="importPokemonSetForm.get('importPokemonSetControl').hasError('required')"
                        type="button" (click)="importPokemonSet()">
                        Import Pokemon Set
                    </button>
                </div>
                <div class="pokemon-export-textbox-container">
                    <textarea type="textarea" rows="5" class="pokemon-export-textbox" [value]="exportData"
                        disabled></textarea>
                </div>
            </div>
        </form>
    </div>
</form>
<form class="toolbar table-footer" [formGroup]="pokemonSetFormatListAddForm" (ngSubmit)="addPokemonSetFormatList()">
    <div class="header-title">
        <h1>Format Lists containing</h1>
        <h2>{{pokemonSetName}}:</h2>
    </div>
    <mat-form-field>
        <mat-select formControlName="pokemonSetFormatListAddControl" [errorStateMatcher]="matcher"
            placeholder="Choose Format">
            <mat-option *ngFor="let formatList of allFormatListsFiltered" value="{{formatList.id}}">
                {{formatList.name}}</mat-option>
            <mat-option *ngIf="allFormatListsFiltered?.length == 0" value="" disabled>Your set is in all
                formats!</mat-option>
        </mat-select>
        <mat-error
            *ngIf="pokemonSetFormatListAddForm.get('pokemonSetFormatListAddControl').hasError('required') && allFormatListsFiltered?.length != 0">
            Format is <strong>required</strong>
        </mat-error>
    </mat-form-field>
    <button mat-raised-button color="primary" class="mat-button"
        [disabled]="pokemonSetFormatListAddForm.get('pokemonSetFormatListAddControl').hasError('required')">
        Add to Pokemon Set
    </button>
</form>
<table class="table-footer" mat-table matSort [dataSource]="dataSource">
    <ng-container *ngFor="let columns of displayedColumns; let i = index" matColumnDef="{{columns}}">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{tableColumnNames[i]}}</th>
        <td mat-cell *matCellDef="let row">{{row[columns]}}</td>
    </ng-container>
    <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef aria-label="row actions">Delete</th>
        <td mat-cell *matCellDef="let element">
            <button mat-raised-button color="warn" class="warning-button" *ngIf="!element.deleteConfirm"
                (click)="confirmDelete(element); $event.stopPropagation()">
                Delete
            </button>
            <span *ngIf="!!element.deleteConfirm" class="delete-confirm-cancel-button">
                <button mat-raised-button color="basic" class="warning-button"
                    (click)="cancelDeleteConfirm(element); $event.stopPropagation()">
                    No
                </button>
                <button mat-raised-button color="accent" class="warning-button"
                    (click)="deleteFormatListPokemonSet(element); $event.stopPropagation()">
                    Yes
                </button>
            </span>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithDelete"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplayWithDelete;"
        [routerLink]="['/format-list/edit/', row.id]"></tr>
</table>